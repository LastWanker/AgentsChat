# 仓库结构总览

以目录树形式梳理当前仓库，便于定位主要代码与文档。仅列出常用/核心文件。

```
.
├─ main.py                        # 程序入口，组装 agent 并启动运行时
├─ config/                        # 配置模块
│  └─ settings.py                 # 全局配置与默认参数
├─ agents/                        # Agent 层行为、提案与解释
│  ├─ agent.py                    # Agent 数据模型与事件构造方法
│  ├─ controller.py               # 监听世界事件、挑选 agent、调用 proposer 入队意向
│  ├─ interpreter.py              # 根据策略裁决意向
│  ├─ policies.py                 # Agent 端策略封装
│  └─ proposer.py                 # 规则/LLM 模式意向生成器
├─ platform/                      # 世界与路由层
│  ├─ world.py                    # 事件记录与可见性广播
│  ├─ router.py                   # 意向转换事件、冷却与投递
│  ├─ observers.py                # 观察者接口定义
│  ├─ observers4debug.py          # 方便调试的观察者实现
│  └─ request_tracker.py          # Request 完成状态监测
├─ events/                        # 事件与意向的数据结构与存取
│  ├─ types.py                    # Event/Intention/Decision 定义
│  ├─ references.py               # 引用规范化工具
│  ├─ store.py                    # 事件存储与落盘
│  └─ query.py                    # 事件查询接口
├─ runtime/                       # 运行时装配与循环
│  ├─ bootstrap.py                # 组装 World/Router/Controller 等组件
│  ├─ loop.py                     # 主循环，逐 tick 取意向并路由
│  ├─ scheduler.py                # 调度器外壳，委托可替换策略
│  └─ scheduler_strategies/        # 发言调度策略集合
│     ├─ recency.py               # 最近久未发言优先
│     ├─ template_order.py        # 模板固定顺序
│     └─ placeholder.py           # 占位策略
├─ ui/
│  └─ console.py                  # 控制台观察者，实现简单输出
├─ llm/                           # LLM 接入与 prompt 模板
│  ├─ client.py                   # LLM 客户端占位与降级
│  ├─ prompts.py                  # Prompt 模板收集
│  └─ schemas.py                  # LLM 输出结构校验
├─ policies/                      # YAML 策略文件
│  ├─ intent_constraint.yaml      # 意向裁决规则
│  ├─ intent_evaluation.yaml      # 评估规则草案
│  ├─ intent_proposal.yaml        # 提案规则草案
│  └─ intent_attribution.yaml     # 贡献归因草案
├─ test/                          # 基础回归/单测
│  ├─ test4agent_observe.py
│  ├─ test4demo1_without_llm.py
│  ├─ test4world.py
│  └─ test_main_runtime_flow.py
├─ legacy/                        # 早期控制器/解释器保留代码
├─ zProposal/                     # 设计规划文档
└─ README.md                      # 项目说明
```

其他辅助文件：`.gitignore`、`.gitattributes` 用于版本管理；`policies/README.md` 记录策略文件说明；`zProposal` 中的 txt/docx 文档保存设计思考与路线。
